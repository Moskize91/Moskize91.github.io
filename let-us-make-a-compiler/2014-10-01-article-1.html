<html lan="zh-cmn-Hans" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="/mdl-style.css" />
		<script src="/mdl-min.js"></script>
		<link rel="stylesheet" href="/styles.css">
		<title>
			
				从零开始写个编译器吧 - 从何处下手 - 
			 moskize 的博客
		</title>
	</head>
	<body class="mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
    
    <header class="tzy-header">
        <span class="tzy-header__title">
            <a href="/">Moskize's Blog</a>
        </span>
        <div class="tzy-header__elements">
        
          <nav>
              
              <a href="/nodes/technology.html">
                技术
              </a>
              
              <a href="/nodes/chat.html">
                杂谈
              </a>
              
          </nav>
        </div>
        <div style="clear: both;"/>
    </header>
      
    <main class="tzy-content">
	    

<div class="tzy-details">
    
	<div class="card">
        <div>
        	<a href="/" class="mdl-button">返回首页</a>
             
             	&gt;&gt;
                  <a href="/let-us-make-a-compiler/index.html" class="mdl-button">从零开始写个编译器吧系列</a>
             
             <div style="clear: both;"/>
        </div>
    	<div class="tzy-article">
    		<h1 class="title">从零开始写个编译器吧 - 从何处下手</h1>
    		
    			<div class="declare">
    			
    			
    			
    				点击<a target="_blank" href="http://zhuanlan.zhihu.com/mosky/19878094">这里</a>查看原文
    			。
    			</div>
    		
            <p>作为本系列的第一章，将考虑从何开始下手。既然写的是编译器，那在此得明确编译器长什么样子，进一步，编译器由哪几部分构成，其工作原理大概是怎样的。了解了这些，才好下手。</p>

<p>简单来说，编译器本身是一个程序，这个程序能将一种代码（源代码）翻译成另一种代码（目标代码）。简而言之就是如下图。</p>

<p><img src="/images/let-us-make-a-compiler/2015-10-24/01.png" alt="" /></p>

<p>而本系列中设计出来以供编译的语言——tao 语言，也就扮演着“源代码”的角色。</p>

<p>而编译器，会将 tao 语言编译成目标代码以供执行。那么，是何种目标代码呢？实际上我并没有打算写一个直接生成可执行程序的编译器，换句话说，该编译器生成的目标代码不可以直接（在操作系统上）运行。因此，我需要为 tao 语言创造一个运行环境。</p>

<p><img src="/images/let-us-make-a-compiler/2015-10-24/02.png" alt="" /></p>

<p>相对于之第一张图，第二张图多了tao runtime environment 这个东东。这即是 tao 语言的运行环境。目标代码将在此运行环境上解释执行。</p>

<p>但是，tao 语言作为一门语言，还必须要配一个标准库。为此，在图中加上标准库，便有了如下图。</p>

<p><img src="/images/let-us-make-a-compiler/2015-10-24/03.png" alt="" /></p>

<p>至此，我们的任务也就清晰的呈现在眼前了。如果我们想让世界上出现一门叫做 tao 语言的新语言，并且能让程序员用这种语言写的程序能顺利运行，我们至少要做出下面三个东西：</p>

<p>编译器：能将 tao 语言写的源代码编译成可供运行环境解释执行的目标代码。
运行环境：解释执行编译器产生的目标代码。
标准库：供 tao 语言的用户调用的类库。</p>

        </div>
        
        
         	<HR/>
         	<div class="tzy-details__comments">
 	            <!-- Duoshuo Comment BEGIN -->
 	            <div class="ds-thread"></div>
                <script type="text/javascript">
                    var duoshuoQuery = {short_name:"taozeyu"};
                    (function() {
                        var ds = document.createElement('script');
                        ds.type = 'text/javascript';ds.async = true;
                        ds.src = 'http://static.duoshuo.com/embed.js';
                        ds.charset = 'UTF-8';
                        (document.getElementsByTagName('head')[0] 
                        || document.getElementsByTagName('body')[0]).appendChild(ds);
                    })();
                </script>
 	         </div>
        
    </div>
</div>

    </main>
    
    <div style="visibility: hidden;">
	    <script type="text/javascript">
	    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
	    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F0a70f08f11313ad84ee0ede2b3d7dc60' type='text/javascript'%3E%3C/script%3E"));
	    </script>
    </div>
    
	</body>
</html>
